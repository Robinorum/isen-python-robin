name: Cypress Tests

on: [push]

jobs:
  cypress-run:
    runs-on: ubuntu-24.04
    container:
      image: cypress/browsers:22.12.0
      options: --user 1001
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Set up Python 3.9
        uses: actions/setup-python@v3
        with:
            python-version: "3.9"

      - name: Start Python server
        run: |
          pip install -r requirements.txt
          python manage.py runserver 0.0.0.0:8080 &
          sleep 5  # attendre que le serveur d√©marre

      - name: Run Cypress tests
        uses: cypress-io/github-action@v6
        with:
          browser: chrome
